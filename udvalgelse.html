<!DOCTYPE html>
<html lang="da">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title></title>
  <link rel="stylesheet" href="assets/css/style.css">
  <link rel="stylesheet" href="https://use.typekit.net/rrr8aqj.css">
</head>

<body>
  <main>
    <div id="fill"></div>
  </main>
  <script src="assets/js/menu.js"></script>

  <script>
    let URLend = "pages?slug=udvaelgelse";
    let endpoint = `http://signehyllested.dk/kea/2_semester/grp3_21-5/wordpress/wp-json/wp/v2/${URLend}`;
    let retter = [];

    document.addEventListener("DOMContentLoaded", start);

    function start() {
      console.log("start");
      hentJSON();
    }

    async function hentJSON() {
      console.log("hent json");

      const response = await fetch(endpoint);
      retter = await response.json();
      visRetter();
    }

    function visRetter() {

      retter.forEach(element => {
        console.log(element.content.rendered);
        document.querySelector("head title").textContent = `21-5 - ${element.title.rendered}`;
        let h1 = document.createElement("h1");
        let h1_i = document.createTextNode(element.title.rendered);
        let main_ = document.querySelector("main");
        h1.appendChild(h1_i);
        main_.insertBefore(h1, main_.childNodes[0]);
        document.querySelector("#fill").innerHTML = `${element.content.rendered}`;

        let fill = document.querySelector("#fill")
        let col_wrap1 = document.createElement("div");
        col_wrap1.classList.add("col_wrap");
        fill.appendChild(col_wrap1);
        document.querySelectorAll(".col1").forEach((col1) => {
          col_wrap1.appendChild(col1);
        })
        fill.insertBefore(col_wrap1, fill.childNodes[2]);
        let col_wrap2 = document.createElement("div");
        col_wrap2.classList.add("col_wrap");
        fill.appendChild(col_wrap2);
        document.querySelectorAll(".col2").forEach((col2) => {
          col_wrap2.appendChild(col2);
        })
        fill.insertBefore(col_wrap2, fill.childNodes[7]);
      });
    }
  </script>
</body></html>
